{{ if .Site.Params.options.darkMode -}}
{{ $darkModeInit := resources.Get "js/darkmode-init.js" | js.Build | minify | fingerprint "sha512" -}}
<script integrity="{{ $darkModeInit.Data.Integrity }}">{{ $darkModeInit.Content | safeJS }}</script>
{{ end -}}
{{- if and (.Site.Params.alert) (.Site.Params.alertDismissable) -}}
{{ $alertInit := resources.Get "js/alert-init.js" | js.Build | minify -}}
<script nonce="dXNlcj0iaGVsbG8iLGRvbWFpbj0iaGVua3ZlcmxpbmRlLmNvbSIsZG9jdW1lbnQud3JpdGUodXNlcisiQCIrZG9tYWluKTs=">{{ $alertInit.Content | safeJS }}</script>
{{- end -}}
{{ if eq (hugo.Environment) "production" -}}
<script data-host="https://microanalytics.io" data-dnt="false" src="https://microanalytics.io/js/script.js" id="ZwSg9rf6GA" async defer crossorigin="anonymous"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate" crossorigin="anonymous"></script>

<pwa-update></pwa-update>
{{ end -}}
{{ if eq .Section "pregrado" "posgrado" "blog" "tags" -}}
<script src="{{ "js/algolia/algoliasearchNetlify.js" | relURL }}" type="text/javascript"></script>
{{ end -}}
{{ if or .Params.math .Site.Params.math }}
{{ partial "head/katex.html" . }}
{{ end }}
{{ if or .Params.quiz .Site.Params.quiz }}
{{ partial "head/quiz.html" . }}
{{ end }}